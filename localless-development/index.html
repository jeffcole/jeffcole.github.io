<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<meta content='I write about building things.' name='description'>
<meta content='jeff cole' name='keywords'>
<meta content='Jeff Cole - Localless Development' property='og:title'>
<meta content='article' property='og:type'>
<meta content='http://gravatar.com/avatar/b510f21d7375664c0425d07417016afd.jpg' property='og:image'>
<meta content='https://jeffcole.github.io/localless-development/' property='og:url'>
<title>Jeff Cole - Localless Development</title>
<link href='https://jeffcole.github.io/localless-development/' rel='canonical'>
<link href='//fonts.googleapis.com/css?family=Lusitana:400,700' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Merriweather+Sans:400,300,300italic,400italic,700italic,700,800,800italic' rel='stylesheet' type='text/css'>
<link href="../assets/stylesheets/application.css" rel="stylesheet" />
</head>
<body class='localless-development localless-development_index type-system-serif'>
<header>
<h1>
Jeff Cole
<a href='/' title='Home'>
<i class='fa fa-fw fa-home'></i>
</a>
</h1>
</header>
<main>
<section class='intro'>
<h3 class='tagline'>
<span>I build things with computers,</span>
<span>for people.</span>
</h3>
<p class='contact'>
<a href="https://github.com/jeffcole"><i class='fa fa-fw fa-2x fa-github' title='GitHub'></i>
</a><a href="https://www.linkedin.com/in/jeffreydcole"><i class='fa fa-fw fa-2x fa-linkedin' title='LinkedIn'></i>
</a><a href="https://twitter.com/obscurehobo"><i class='fa fa-fw fa-2x fa-twitter' title='Twitter'></i>
</a><a href="mailto:jeffreydonaldcole@gmail.com"><i class='fa fa-fw fa-2x fa-envelope' title='Email'></i>
</a></p>

</section>
<article>
<h1>Localless Development</h1>
<p class='date'>
September 25, 2024
</p>
<blockquote>
  <p><em>Or, "It's 2024, why are we debugging each other's local environments?"</em></p>
</blockquote>

<p>Want a sure-fire way to slow down a team of developers? Give them each a machine of their choice, and have them install whatever software, and make whatever configurations they like, on those machines. Then, have them collaborate on, and deploy to, an application hosted on a machine that looks nothing like what most of the team is running. Finally, don't forget to allow the local setup instructions for the application to wither and decay like an abandoned vegetable garden.</p>

<p>Sound crazy? I agree! The fact remains, however, that this is how many development teams operate today.</p>

<h2 id="looking-ahead">Looking Ahead</h2>

<p>I'm a believer that cloud development environments are the future. Once an application environments is standardized using a tool like Docker, it doesn't matter what platform, software, or configurations a new developer on the team is running. With a one-liner, they can almost instantly be ready to contribute value to the project via an isolated environment of their very own. Spinning up environments tied to individual branches or pull requests for purposes of testing also becomes trivial.</p>

<p>The great news is that services such as <a href="https://github.com/features/codespaces">GitHub Codespaces</a> and <a href="https://www.gitpod.io/">Gitpod</a> are poised to provide hosted solutions for these workflows, today. Meanwhile, developers can continue use their favorite editors, tools, and configurations via extensions and custom dotfiles. No team member's choice of editor or tooling need be mandated project-wide.</p>

<h2 id="an-experiment">An Experiment</h2>

<p>Motivated by these advantages, I decided to start playing with this approach. In the back of my mind was a question: In a world that was truly "localless," would it be possible to create and develop a real world database-backed web application <em>using nothing but a web browser</em>?</p>

<p>I knew that GitHub had rolled out a <a href="https://code.visualstudio.com/docs/editor/vscode-web">web-based version of the VS Code editor</a>, so that was a good start, and it should integrate nicely with GitHub Codespaces as a cloud platform. In looking around the Codespaces documentation, I noticed that the usual entry points into the service are from either a slim set of officially supported templates, or a pre-existing project repository. But what if your preferred stack doesn't have a template? In our hypothetical localless universe, we wouldn't have a machine on which to install dependencies and bootstrap a project, other than what is available in the cloud. Would it be possible to do so from the cloud environment itself?</p>

<p>Being a fan of the Elixir language and the Phoenix web framework, let's try creating and running a new Phoenix project, complete with PostgreSQL database, in the cloud, entirely from a web browser.</p>

<h2 id="the-setup">The Setup</h2>

<p>We can start by creating a new repository via the GitHub web UI. From there, hitting the <code>.</code> key will open VS Code for the Web in the repository root. We can use the usual VS Code operations to create a few files underneath a <code>.devcontainer</code> directory. Copying and pasting the following should do the trick.</p>

<h4 id="devcontainerdevcontainerjson"><code>.devcontainer/devcontainer.json</code></h4>

<pre class="highlight json"><code><span class="p">{</span><span class="w">&#x000A;  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Localless"</span><span class="p">,</span><span class="w">&#x000A;  </span><span class="s2">"dockerComposeFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker-compose.yml"</span><span class="p">,</span><span class="w">&#x000A;  </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">&#x000A;  </span><span class="s2">"workspaceFolder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/workspaces/${localWorkspaceFolderBasename}"</span><span class="w">&#x000A;</span><span class="p">}</span><span class="w">&#x000A;</span></code></pre>
<p>This is the dev container configuration that Codespaces will use to create our environment. See the <a href="https://docs.github.com/en/codespaces">Codespaces docs</a> for more information.</p>

<h4 id="devcontainerdocker-composeyml"><code>.devcontainer/docker-compose.yml</code></h4>

<pre class="highlight yaml"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.8"</span>&#x000A;&#x000A;<span class="na">services</span><span class="pi">:</span>&#x000A;  <span class="na">app</span><span class="pi">:</span>&#x000A;    <span class="na">build</span><span class="pi">:</span>&#x000A;      <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>&#x000A;      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">app.docker</span>&#x000A;&#x000A;    <span class="na">volumes</span><span class="pi">:</span>&#x000A;      <span class="pi">-</span> <span class="s">../..:/workspaces:cached</span>&#x000A;&#x000A;    <span class="na">command</span><span class="pi">:</span> <span class="s">sleep infinity</span>&#x000A;&#x000A;    <span class="na">network_mode</span><span class="pi">:</span> <span class="s">service:db</span>&#x000A;&#x000A;  <span class="na">db</span><span class="pi">:</span>&#x000A;    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:latest</span>&#x000A;    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>&#x000A;    <span class="na">volumes</span><span class="pi">:</span>&#x000A;      <span class="pi">-</span> <span class="s">postgres-data:/var/lib/postgresql/data</span>&#x000A;    <span class="na">environment</span><span class="pi">:</span>&#x000A;      <span class="na">POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">postgres</span>&#x000A;      <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">postgres</span>&#x000A;      <span class="na">POSTGRES_DB</span><span class="pi">:</span> <span class="s">postgres</span>&#x000A;&#x000A;<span class="na">volumes</span><span class="pi">:</span>&#x000A;  <span class="na">postgres-data</span><span class="pi">:</span>&#x000A;</code></pre>
<p>This <a href="https://docs.docker.com/compose/">Docker Compose</a> file is pointed to by the <code>.devcontainer.json</code> file, and specifies two services, <code>app</code> and <code>db</code>. The <code>db</code> service takes advantage of the community-maintained <code>postgres:latest</code> image, while our <code>app</code> service points to a custom <code>app.docker</code> <a href="https://docs.docker.com/reference/dockerfile/">Dockerfile</a>.</p>

<h4 id="devcontainerappdocker"><code>.devcontainer/app.docker</code></h4>

<pre class="highlight plaintext"><code>ARG ELIXIR_VERSION=1.17.2&#x000A;ARG OTP_VERSION=27.0.1&#x000A;ARG DEBIAN_VERSION=bullseye-20240812-slim&#x000A;&#x000A;ARG IMAGE="hexpm/elixir:${ELIXIR_VERSION}-erlang-${OTP_VERSION}-debian-${DEBIAN_VERSION}"&#x000A;&#x000A;FROM ${IMAGE}&#x000A;&#x000A;RUN apt-get update -y &amp;&amp; apt-get install -y build-essential git inotify-tools \&#x000A;    &amp;&amp; apt-get clean &amp;&amp; rm -f /var/lib/apt/lists/*_*&#x000A;&#x000A;WORKDIR ${HOME}&#x000A;&#x000A;RUN mix local.hex --force &amp;&amp; \&#x000A;    mix local.rebar --force&#x000A;&#x000A;ENV MIX_ENV="dev"&#x000A;</code></pre>
<p>This file is based upon the first few lines of the Dockerfile in the <a href="https://hexdocs.pm/phoenix/releases.html#containers">Phoenix Releases guide</a>. The original file first creates a "builder image," which is ultimately used to create a release image. We can base our development image on this builder image, retaining the dependencies necessary to bootstrap a new project. The key dependencies in this case are the Hex package manager, and the Rebar build tool. We also add installation of inotify-tools, which is required for Phoenix live-reload. We can use the VS Code Source Control commands to commit these files to our repo.</p>

<p>Installing the GitHub Codespaces extension will provide the <strong>Codespaces: Create New Codespace…</strong> command. Pointing this command to our repository, our <code>main</code> branch, and specifying a machine type (number of cores, and amount of RAM and storage) will spin up the codespace in VS Code for the Web in another tab.</p>

<h2 id="in-the-computer">IN the Computer</h2>

<p><img src="../assets/images/photos/codespaces.jpg" alt="Codespaces image" /></p>

<p style="font-style: italic; text-align: center;">
  VS Code for the Web running in a codespace
</p>

<p>Opening the terminal within VS Code provides access to the tooling installed via our configuration files. With Elixir, Rebar, and Hex available, we can run the following to create a new Phoenix project within the Codespace.</p>

<pre class="highlight shell"><code>mix archive.install phx_new&#x000A;mix phx.new ../localless&#x000A;</code></pre>
<p>This will create the project under the <code>/workspaces/localless</code> directory in the codespace. We can commit the created files to our repository, and we're done bootstrapping our project. Running the following will install dependencies, create the PostgreSQL database, and start the Phoenix web server under the IEx interactive shell.</p>

<pre class="highlight shell"><code><span class="nb">cd</span> ../localless&#x000A;mix deps.get&#x000A;mix ecto.create&#x000A;iex -S mix phx.server&#x000A;</code></pre>
<p>VS Code will display a popup with a link to the server running on a forwarded port in the codespace. Hitting it will visit our app in another tab.</p>

<p>From here we can develop our app just as we would in a traditional local environment. We'd likely want to add commands to install dependencies, create the database, and seed it with test data to a <a href="https://docs.github.com/en/codespaces/getting-started/deep-dive#step-4-post-creation-setup">post-create command</a> in our <code>devcontainer.json</code>, so that these tasks are performed every time we spin up a codespace.</p>

<p>Check out the <a href="https://github.com/jeffcole/localless">jeffcole/localless</a> repository on GitHub for a reference to the project thus far.</p>

<h2 id="onward">Onward</h2>

<p>I probably won't be ditching my Mac for a Chromebook anytime soon. However this experiment shows what is possible today without needing to have the software that runs your app on your local computer.</p>

<p>Ultimately, the goal is to move toward processes that have fewer moving parts, and thus opportunities to fail and distract the fastest moving software teams from building value.</p>


<div class='share'><a href="http://twitter.com/home?status=Read+%27Localless+Development%27+%40obscurehobo+https%3A%2F%2Fjeffcole.github.io%2Flocalless-development%2F" target="_blank"><img src="../assets/images/icons/twitter.svg" alt="Twitter" /><span>Tweet This</span></a></div>
</article>

</main>
<footer>
<a class='home' href='/' title='Home'>Home</a>
<p class='contact'>
<a href="https://github.com/jeffcole"><i class='fa fa-fw fa-2x fa-github' title='GitHub'></i>
</a><a href="https://www.linkedin.com/in/jeffreydcole"><i class='fa fa-fw fa-2x fa-linkedin' title='LinkedIn'></i>
</a><a href="https://twitter.com/obscurehobo"><i class='fa fa-fw fa-2x fa-twitter' title='Twitter'></i>
</a><a href="mailto:jeffreydonaldcole@gmail.com"><i class='fa fa-fw fa-2x fa-envelope' title='Email'></i>
</a></p>

<p>© 2016–present Jeff Cole</p>
</footer>
<script src="../assets/javascripts/application.js"></script>
</body>
</html>
